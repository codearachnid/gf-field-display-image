var GFFDI_VERSION="1.1.0";function gffdi_first_time_init(i){var e=document.getElementsByTagName("head")[0],a=document.createElement("link");a.href=i+"style.css",a.type="text/css",a.rel="stylesheet",e.append(a)}function gffdi_toggle_placeholder(i,e){i?(jQuery("#field_"+e+" .ginput_container_display_image").addClass("has-image").removeClass("has-placeholder"),jQuery("#display_image_size,label[for='display_image_size'],.gf-display-image-remove,#display_image_alt,label[for='display_image_alt'],p[for='display_image_alt']").show(),jQuery(".gf-display-image-add,label[for='display_image_id']").hide()):(jQuery("#field_"+e+" .ginput_container_display_image").addClass("has-placeholder").removeClass("has-image"),jQuery("#display_image_size,label[for='display_image_size'],.gf-display-image-remove,#display_image_alt,label[for='display_image_alt'],p[for='display_image_alt'],#display_image_size_custom").hide(),jQuery("#display_image_size_c_width,#display_image_size_c_height").val("").trigger("change"),jQuery(".gf-display-image-add,label[for='display_image_id']").show()),jQuery("#url_image_input_wrapper").hide()}jQuery(document).ready(function(i){i(document).bind("gform_load_field_settings",function(e,a,t){var l=!1;if(image_id=a.display_image_id,image_size=a.display_image_size,image_alt=a.display_image_alt,image_url=a.display_image_url,image_dimension=a.display_image_dimension,l=""!=image_id&&image_id>0||l,"undefined"!=typeof image_url&&""!=image_url?(l=!0,i("#display_image_size").val("custom").prop("disabled","disabled").trigger("change")):""==image_size?i("#display_image_size").val("").hide():i("#display_image_size").val(image_size).show(),""!=image_dimension){const e=image_dimension.split(":");i("#display_image_size_custom").show(),i("#display_image_size_c_width").val(e[0]),i("#display_image_size_c_height").val(e[1])}i("#display_image_alt").val(image_alt),i("#url_image_input").val(image_url),gffdi_toggle_placeholder(!!l,a.id)}),i("#display_image_alt").change(function(e){const a=i("#sidebar_field_label").data("fieldid"),t=i(this).val();SetFieldProperty("display_image_alt",t),i("#input_"+a).attr("alt",t)}),i("#display_image_size").change(function(e){const a=i("#sidebar_field_label").data("fieldid"),t=i("#input_"+a),l=t.data("imgid"),s=i(this).val();if(l>0)wp.media.attachment(l).fetch().then(function(i){var e="custom"==s?"full":s;t.attr("src",wp.media.attachment(l).attributes.sizes[e].url).show()});else if("custom"!=s){const i={thumbnail:"150",medium:"300",large:"1024",custom:"auto",full:"auto"};t.height()==t.width()?t.attr("width",i[s]).attr("height",i[s]):t.height()>t.width()?t.attr("width",i[s]).attr("height","auto"):t.height()<t.width()&&t.attr("width","auto").attr("height",i[s])}"custom"==s?i("#display_image_size_custom").show():i("#display_image_size_custom").hide(),SetFieldProperty("display_image_size",s),t.data("imgsize",s),console.log(s)}),i("#display_image_size_c_width,#display_image_size_c_height").change(function(e){console.log("changing dimensions",i(this).val(),i(this).data("type"));const a=i("#sidebar_field_label").data("fieldid"),t=i("#input_"+a);var l="";"width"==i(this).data("type")?(t.attr("width",i(this).val()).attr("height",i("#display_image_size_c_height").val()),l=i(this).val()+":"+i("#display_image_size_c_height").val()):"height"==i(this).data("type")&&(t.attr("width",i("#display_image_size_c_width").val()).attr("height",i(this).val()),l=i("#display_image_size_c_width").val()+":"+i(this).val()),SetFieldProperty("display_image_dimension",l),t.data("dimension",l)}),i(".GFFDI_action").click(function(e){e.preventDefault();const a=i(this),t=i("#sidebar_field_label").data("fieldid"),l=i("#input_"+t),s=l.data("imgid");switch(a.data("action")){case"open-url":i("#url_image_input_wrapper").show();break;case"set-url":image_url=i("#url_image_input").val(),console.log("set the url",image_url),SetFieldProperty("display_image_url",image_url),l.attr("src",image_url).show(),""==image_url?i("#display_image_size").val("").prop("disabled",!1).trigger("change"):i("#display_image_size").val("custom").prop("disabled","disabled").trigger("change"),gffdi_toggle_placeholder(!0,t);break;case"upload":case"library":image_size=l.data("imgsize"),i("#url_image_input_wrapper").hide(),i("#display_image_size").val("").prop("disabled",!1).trigger("change"),i("#display_image_size_custom").hide();var _=wp.media({title:"Select image",library:{type:"image"},button:{text:"Use this image"},multiple:!1});_.on("select",function(){const e=_.state().get("selection").first().toJSON();SetFieldProperty("display_image_id",e.id),i("#url_image_input").val(""),SetFieldProperty("display_image_url",""),l.data("imgid",e.id),"undefined"!=image_size&&""!=image_size||(image_size="full",SetFieldProperty("display_image_size",image_size),jQuery("#display_image_size").val(image_size)),l.attr("src",e.sizes[image_size].url).show(),gffdi_toggle_placeholder(!0,t)}),_.on("open",function(){if(s){const i=_.state().get("selection");attachment=wp.media.attachment(s),attachment.fetch(),i.add(attachment?[attachment]:[])}}),_.open();break;case"remove":SetFieldProperty("display_image_id",""),i("#display_image_alt").val("").trigger("change"),l.removeAttr("src").data("imgid","").data("imgsize","").hide(),gffdi_toggle_placeholder(!1,t)}})});