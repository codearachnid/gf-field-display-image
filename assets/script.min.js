var GFFDI_VERSION="1.1.0";function gffdi_first_time_init(e){var a=document.getElementsByTagName("head")[0],i=document.createElement("link");i.href=e+"style.css",i.type="text/css",i.rel="stylesheet",a.append(i)}function gffdi_toggle_placeholder(e,a){e?(jQuery("#field_"+a+" .ginput_container_display_image").addClass("has-image").removeClass("has-placeholder"),jQuery("#display_image_size,label[for='display_image_size'],.gf-display-image-remove,#display_image_alt,label[for='display_image_alt'],p[for='display_image_alt']").show(),jQuery(".gf-display-image-add,label[for='display_image_id']").hide()):(jQuery("#field_"+a+" .ginput_container_display_image").addClass("has-placeholder").removeClass("has-image"),jQuery("#display_image_size,label[for='display_image_size'],.gf-display-image-remove,#display_image_alt,label[for='display_image_alt'],p[for='display_image_alt']").hide(),jQuery(".gf-display-image-add,label[for='display_image_id']").show())}jQuery(document).bind("gform_load_field_settings",function(e,a,i){image_id=a.display_image_id,image_size=a.display_image_size,image_alt=a.display_image_alt,""==image_size?jQuery("#display_image_size").val("").hide():jQuery("#display_image_size").val(image_size).show(),jQuery("#display_image_alt").val(image_alt),""!=image_id&&image_id>0?gffdi_toggle_placeholder(!0,a.id):gffdi_toggle_placeholder(!1,a.id)}),jQuery(document).ready(function(e){e("#display_image_alt").change(function(a){const i=e("#sidebar_field_label").data("fieldid"),t=e(this).val();SetFieldProperty("display_image_alt",t),e("#input_"+i).attr("alt",t)}),e("#display_image_size").change(function(a){const i=e("#sidebar_field_label").data("fieldid"),t=e("#input_"+i),l=t.data("imgid"),d=e(this).val();wp.media.attachment(l).fetch().then(function(e){t.attr("src",wp.media.attachment(l).attributes.sizes[d].url).show()}),SetFieldProperty("display_image_size",d),t.data("imgsize",d)}),e(".GFFDI_action").click(function(a){a.preventDefault();const i=e(this),t=e("#sidebar_field_label").data("fieldid"),l=e("#input_"+t),d=l.data("imgid");switch(i.data("action")){case"open-url":e("#url_image_input_wrapper").show();break;case"set-url":console.log("set the url",e("#url_image_input").val());break;case"upload":case"library":image_size=l.data("imgsize"),e("#url_image_input_wrapper").hide(),e("#url_image_input").val("");var s=wp.media({title:"Select image",library:{type:"image"},button:{text:"Use this image"},multiple:!1});s.on("select",function(){const e=s.state().get("selection").first().toJSON();SetFieldProperty("display_image_id",e.id),l.data("imgid",e.id),"undefined"!=image_size&&""!=image_size||(image_size="full",SetFieldProperty("display_image_size",image_size),jQuery("#display_image_size").val(image_size)),l.attr("src",e.sizes[image_size].url).show(),gffdi_toggle_placeholder(!0,t)}),s.on("open",function(){if(d){const e=s.state().get("selection");attachment=wp.media.attachment(d),attachment.fetch(),e.add(attachment?[attachment]:[])}}),s.open();break;case"remove":SetFieldProperty("display_image_id",""),e("#display_image_alt").val("").trigger("change"),l.removeAttr("src").data("imgid","").data("imgsize","").hide(),gffdi_toggle_placeholder(!1,t)}})});